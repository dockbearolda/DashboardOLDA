[build]
# Commande de build : génère le client Prisma + compile Next.js
buildCommand = "npm ci && npx prisma generate && npm run build"

[deploy]
# Commande de démarrage — tsx est maintenant en dependencies, pas devDependencies
startCommand = "npx prisma migrate deploy && tsx server.ts"
healthcheckPath = "/api/health"
healthcheckTimeout = 120
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

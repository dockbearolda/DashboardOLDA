[build]
buildCommand = "npm ci && npx prisma generate && npm run build"

[deploy]
# Migrations séparées du démarrage — évite le hang si PostgreSQL n'est pas encore prêt
releaseCommand = "npx prisma migrate deploy"
startCommand = "tsx server.ts"
healthcheckPath = "/api/health"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

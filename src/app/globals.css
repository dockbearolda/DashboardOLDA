@import "tailwindcss";

@theme {
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);

  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  /* ── Custom animations ─────────────────────────────────────────── */
  --animate-fade-up: fade-up 0.55s cubic-bezier(0.16, 1, 0.3, 1) both;
  --animate-fade-in: fade-in 0.4s ease both;
  --animate-slide-in-left: slide-in-left 0.4s cubic-bezier(0.16, 1, 0.3, 1) both;
  --animate-pulse-dot: pulse-dot 2s ease-in-out infinite;

  @keyframes fade-up {
    from {
      opacity: 0;
      transform: translateY(18px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes slide-in-left {
    from {
      opacity: 0;
      transform: translateX(-12px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes pulse-dot {
    0%,
    100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.5;
      transform: scale(0.85);
    }
  }
}

/* ════════════════════════════════════════════════════════════════════
   LIGHT MODE  ·  Apple-inspired warm neutrals
   ════════════════════════════════════════════════════════════════════ */
:root {
  /* Surfaces */
  --background: 240 5% 96%;       /* #f5f5f7  ← Apple's signature warm off-white */
  --foreground: 240 3% 12%;       /* #1d1d1f  ← Apple near-black (never pure) */

  --card: 0 0% 100%;
  --card-foreground: 240 3% 12%;

  --popover: 0 0% 100%;
  --popover-foreground: 240 3% 12%;

  /* Brand */
  --primary: 211 100% 44%;        /* #0071e3  ← Apple Blue */
  --primary-foreground: 0 0% 100%;

  /* Secondary / muted */
  --secondary: 240 4% 93%;        /* #ededed */
  --secondary-foreground: 240 3% 12%;

  --muted: 240 4% 93%;
  --muted-foreground: 240 2% 44%; /* #6e6e73  ← iOS secondary label */

  --accent: 240 4% 93%;
  --accent-foreground: 240 3% 12%;

  /* Status */
  --destructive: 0 80% 58%;
  --destructive-foreground: 0 0% 100%;

  /* Chrome */
  --border: 240 4% 87%;           /* warm subtle border */
  --input: 240 4% 87%;
  --ring: 211 100% 44%;

  --radius: 0.875rem;             /* 14 px — very slightly less than 1 rem */
}

/* ════════════════════════════════════════════════════════════════════
   DARK MODE  ·  Palette officielle Apple UIKit (ios 17+)
   ════════════════════════════════════════════════════════════════════
   Référence Apple HIG :
     systemBackground            #000000  (OLED) / #1C1C1E (non-OLED)
     secondarySystemBackground   #1C1C1E
     tertiarySystemBackground    #2C2C2E
     systemGroupedBackground     #000000
     separator                   #38383A
     label                       #FFFFFF
     secondaryLabel              #8E8E93
   ════════════════════════════════════════════════════════════════════ */
.dark {
  --background: 240 3% 11%;       /* #1C1C1E — Apple systemBackground dark */
  --foreground: 0 0% 100%;        /* #FFFFFF — Apple label dark */

  --card: 240 2% 17%;             /* #2A2A2C — Apple secondarySystemGroupedBackground */
  --card-foreground: 0 0% 100%;

  --popover: 240 2% 17%;
  --popover-foreground: 0 0% 100%;

  --primary: 211 95% 62%;         /* softer Apple Blue on dark bg */
  --primary-foreground: 0 0% 100%;

  --secondary: 240 2% 18%;        /* #2C2C2E — Apple tertiarySystemBackground */
  --secondary-foreground: 0 0% 100%;

  --muted: 240 2% 18%;
  --muted-foreground: 240 2% 56%; /* #8E8E93 — Apple secondaryLabel */

  --accent: 240 2% 18%;
  --accent-foreground: 0 0% 100%;

  --destructive: 0 80% 58%;
  --destructive-foreground: 0 0% 100%;

  --border: 240 2% 22%;           /* #38383A — Apple separator dark */
  --input: 240 2% 22%;
  --ring: 211 95% 62%;
}

/* ════════════════════════════════════════════════════════════════════
   BASE
   ════════════════════════════════════════════════════════════════════ */
@layer base {
  /* Transitions douces sur les propriétés de couleur — tous éléments.
     Portée : background-color, color, border-color uniquement pour
     éviter les conflits avec les transforms et les animations custom.
     duration 0.2 s = seuil Apple HIG pour les changements d'état UI. */
  *, *::before, *::after {
    border-color: hsl(var(--border));
    /* Only transition composited properties — box-shadow triggers repaint on Windows */
    transition-property: color, background-color, border-color,
                         text-decoration-color, fill, stroke, opacity;
    transition-duration: 0.18s;
    transition-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1); /* iOS default easing */
  }

  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    font-family: var(--font-sans);
    font-feature-settings: "rlig" 1, "calt" 1, "ss01" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    letter-spacing: -0.01em;
    line-height: 1.5;
  }

  input, button, textarea, select {
    font-family: inherit;
    letter-spacing: inherit;
  }

  /* Tighten heading tracking slightly — Apple style */
  h1, h2, h3, h4 {
    letter-spacing: -0.02em;
  }
}

/* ════════════════════════════════════════════════════════════════════
   iOS SAFE-AREA INSET UTILITIES  (viewport-fit=cover required)
   Usage: pt-safe, pb-safe, pl-safe, pr-safe, px-safe, py-safe
   For combined min-padding, use: px-safe-4 / px-safe-6
   ════════════════════════════════════════════════════════════════════ */
@layer utilities {
  /* Bare safe-area padding (replaces padding, does NOT combine) */
  .pt-safe  { padding-top:    env(safe-area-inset-top);    }
  .pb-safe  { padding-bottom: env(safe-area-inset-bottom); }
  .pl-safe  { padding-left:   env(safe-area-inset-left);   }
  .pr-safe  { padding-right:  env(safe-area-inset-right);  }
  .px-safe  { padding-left:   env(safe-area-inset-left);
              padding-right:  env(safe-area-inset-right);  }
  .py-safe  { padding-top:    env(safe-area-inset-top);
              padding-bottom: env(safe-area-inset-bottom); }

  /* Combined: at least 1rem/1.5rem even when inset is 0 */
  .px-safe-4 {
    padding-left:  max(1rem,    env(safe-area-inset-left));
    padding-right: max(1rem,    env(safe-area-inset-right));
  }
  .px-safe-6 {
    padding-left:  max(1.5rem,  env(safe-area-inset-left));
    padding-right: max(1.5rem,  env(safe-area-inset-right));
  }
  .pb-safe-6 {
    padding-bottom: max(1.5rem, env(safe-area-inset-bottom));
  }

  /* Margin variant for floating elements (toast, FAB) */
  .mb-safe-6 {
    margin-bottom: max(1.5rem,  env(safe-area-inset-bottom));
  }

  /* ── View toggle ────────────────────────────────────────────────── */
  .hidden { display: none; }

  /* ── GPU acceleration — forces composited layer on Windows/Chrome ── */
  .gpu-layer {
    transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    will-change: transform, opacity;
  }

  /* ── Scrollbar hiding (iOS-style snap containers) ───────────────── */
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width:    none;
  }
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
}

/* ════════════════════════════════════════════════════════════════════
   SCROLLBAR
   ════════════════════════════════════════════════════════════════════ */
::-webkit-scrollbar {
  width: 5px;
  height: 5px;
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background: hsl(var(--border));
  border-radius: 999px;
}
::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-foreground) / 0.45);
}

/* ════════════════════════════════════════════════════════════════════
   SELECTION
   ════════════════════════════════════════════════════════════════════ */
::selection {
  background: hsl(var(--primary) / 0.15);
  color: hsl(var(--foreground));
}
